<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Mobile Panning Demo</title>
    <style>
        #content {
            width: 100px;
            height: 100px;
            background-color: blue;
            color: white;
            text-align: center;
            line-height: 100px;
            position: absolute;
            top: calc(50% - 50px);
            left: calc(50% - 50px);
        }
    </style>
</head>
<body>
    <button id="init" type="button">Click me!</button>
    <div id=""info">
        <p>
            alpha: <span id="alpha">?</span><br />
            beta: <span id="beta">?</span><br />
            gamma: <span id="gamma">?</span>
        </p>
    </div>
    <div id="content">Move me!</div>

    <script>

        function orient(event) {
            if (oriented === false) {
                alpha_base = event.alpha;
                beta_base  = event.beta;
                gamma_base = event.gamma;
                oriented = true;
            }
            alpha = event.alpha - alpha_base;
            beta = event.beta - beta_base;
            gamma = event.gamma - gamma_base;
            alphaspan.innerHTML = alpha
            betaspan.innerHTML = beta
            gammaspan.innerHTML = gamma
        }

        var permit = () => {
            DeviceOrientationEvent.requestPermission()
            .then(response => {
                if (response == 'granted') {
                    window.addEventListener('deviceorientation', orient)
                }
            })
            .catch(console.error)
        }

        var init = () => {
            btn.style.display = 'none';
            permit();
        }

        let oriented = true,
            alpha_base = 0.0, beta_base = 0.0, gamma_base = 0.0,
            alpha = 0.0, beta = 0.0, gamma = 0.0;

        let btn = document.getElementById('init'),
            alphaspan = document.getElementById('alpha'),
            betaspan  = document.getElementById('beta'),
            gammaspan = document.getElementById('gamma');
        btn.addEventListener('click', init);
    </script>
</body>
</html>
